---
// src/pages/articulos/[slug].astro - CONECTADO CON CONTENT COLLECTIONS
import { getCollection } from 'astro:content';
import ArticleLayout from '../../layouts/ArticleLayout.astro';

export async function getStaticPaths() {
  // USAR TUS CONTENT COLLECTIONS EN LUGAR DE DATOS HARDCODEADOS
  const articulos = await getCollection('articulos');
  
  return articulos.map((articulo) => ({
    params: { slug: articulo.slug },
    props: { 
      article: {
        id: articulo.slug,
        title: articulo.data.title,
        description: articulo.data.description,
        image: '/images/articles/default.jpg', // Imagen por defecto
        author: {
          name: articulo.data.author || 'Editor',
          avatar: '/images/authors/default.jpg',
          bio: 'Especialista en cuidado de mascotas'
        },
        date: articulo.data.date.toISOString().split('T')[0],
        readingTime: 5, // Por defecto
        views: 0,
        categories: articulo.data.tags || [],
        content: articulo, // Pasar el objeto completo para renderizar
        relatedArticles: [] // Por ahora vac√≠o
      }
    }
  }));
}

const { article } = Astro.props;
const { Content } = await article.content.render();
---

<ArticleLayout
  title={article.title}
  description={article.description}
  image={article.image}
  author={article.author}
  date={article.date}
  readingTime={article.readingTime}
  categories={article.categories}
  views={article.views}
  relatedArticles={article.relatedArticles}
>
  <!-- RENDERIZAR EL CONTENIDO MARKDOWN -->
  <Content />
</ArticleLayout>