---
// src/pages/razas/index.astro - COPIANDO EXACTAMENTE de comparador-razas.astro
import BaseLayout from '../../layouts/BaseLayout.astro';
import Container from '../../components/ui/Container.astro';
import Button from '../../components/ui/Button.astro';
import BreedsComparisonContainer from '../../components/features/breeds-comparison/BreedsComparisonContainer.jsx';
import { breedsData } from '../../data/breeds/index.js';

const title = "Razas de Perros y Gatos | Encuentra tu compa√±ero ideal";
const description = "Explora m√°s de 50 razas de perros y gatos con informaci√≥n detallada sobre temperamento, cuidados y compatibilidad familiar.";

// ‚úÖ USAR DATOS REALES IGUAL QUE EN COMPARADOR-RAZAS
const breeds = breedsData;

// üìä Estad√≠sticas para mostrar
const stats = {
  total: breeds.length,
  dogs: breeds.filter(breed => breed?.type === 'dog').length,
  cats: breeds.filter(breed => breed?.type === 'cat').length,
  hypoallergenic: breeds.filter(breed => breed?.hypoallergenic === true).length
};
---

<BaseLayout title={title} description={description}>
  {/* Hero Section */}
  <div class="bg-gradient-to-br from-[#FAFAFA] to-[#E6ECF2] py-16">
    <Container>
      <div class="text-center max-w-4xl mx-auto mb-12">
        <h1 class="text-3xl md:text-5xl font-bold text-[#2E2E2E] mb-4">
          Encuentra la raza perfecta para ti
        </h1>
        <p class="text-lg text-gray-600 mb-8">
          Explora caracter√≠sticas detalladas, temperamento y necesidades de cada raza para tomar la mejor decisi√≥n para tu familia.
        </p>
        
        {/* Estad√≠sticas */}
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto mb-8">
          <div class="bg-white rounded-lg p-4 shadow-sm">
            <div class="text-2xl font-bold text-[#AFC2D5]">{stats.total}</div>
            <div class="text-sm text-gray-600">Razas totales</div>
          </div>
          <div class="bg-white rounded-lg p-4 shadow-sm">
            <div class="text-2xl font-bold text-[#AFC2D5]">{stats.dogs}</div>
            <div class="text-sm text-gray-600">Perros</div>
          </div>
          <div class="bg-white rounded-lg p-4 shadow-sm">
            <div class="text-2xl font-bold text-[#AFC2D5]">{stats.cats}</div>
            <div class="text-sm text-gray-600">Gatos</div>
          </div>
          <div class="bg-white rounded-lg p-4 shadow-sm">
            <div class="text-2xl font-bold text-[#AFC2D5]">{stats.hypoallergenic}</div>
            <div class="text-sm text-gray-600">Hipoalerg√©nicas</div>
          </div>
        </div>

        {/* Botones principales */}
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Button href="/tu-raza-ideal" variant="primary" size="lg" class="bg-[#AFC2D5] text-white hover:bg-[#9DB3C6]">
            üéØ Descubre tu raza ideal
          </Button>
          <Button 
            href="#comparador" 
            variant="outline" 
            size="lg" 
            class="border-[#AFC2D5] text-[#AFC2D5] hover:bg-[#AFC2D5] hover:text-white"
          >
            üîç Comparar razas
          </Button>
        </div>
      </div>
    </Container>
  </div>

  {/* Secci√≥n del Comparador - EXACTO COMO EN COMPARADOR-RAZAS */}
  <section id="comparador" class="py-12 bg-white">
    <Container>
      

      {/* Secci√≥n de filtros y comparaci√≥n - IGUAL QUE COMPARADOR-RAZAS */}
      <div class="mb-12">
        <BreedsComparisonContainer breeds={breeds} client:load />
      </div>
    </Container>
  </section>

  {/* Secci√≥n informativa - Mantener para SEO y contenido */}
  <section class="py-12 bg-[#FAFAFA]">
    <Container>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {/* C√≥mo funciona el comparador */}
        <div class="bg-white rounded-xl p-6 shadow-sm">
          <h3 class="text-xl font-bold mb-4 text-[#2E2E2E]">
            üéØ C√≥mo funciona nuestro comparador inteligente
          </h3>
          <ul class="space-y-3 text-sm">
            <li class="flex items-start">
              <div class="flex-shrink-0 w-6 h-6 rounded-full bg-[#AFC2D5] flex items-center justify-center text-white mr-3 mt-0.5">
                <span class="text-xs font-bold">1</span>
              </div>
              <p><strong>Filtra por tus necesidades:</strong> Usa los filtros para encontrar razas que se adapten a tu estilo de vida.</p>
            </li>
            <li class="flex items-start">
              <div class="flex-shrink-0 w-6 h-6 rounded-full bg-[#AFC2D5] flex items-center justify-center text-white mr-3 mt-0.5">
                <span class="text-xs font-bold">2</span>
              </div>
              <p><strong>Selecciona hasta 3 razas:</strong> Haz clic en "Comparar" en las razas que te interesan.</p>
            </li>
            <li class="flex items-start">
              <div class="flex-shrink-0 w-6 h-6 rounded-full bg-[#AFC2D5] flex items-center justify-center text-white mr-3 mt-0.5">
                <span class="text-xs font-bold">3</span>
              </div>
              <p><strong>An√°lisis personalizado:</strong> Si completaste nuestro cuestionario, ver√°s compatibilidad espec√≠fica para ti.</p>
            </li>
            <li class="flex items-start">
              <div class="flex-shrink-0 w-6 h-6 rounded-full bg-[#AFC2D5] flex items-center justify-center text-white mr-3 mt-0.5">
                <span class="text-xs font-bold">4</span>
              </div>
              <p><strong>Toma la mejor decisi√≥n:</strong> Compara caracter√≠sticas, pros/contras y compatibilidad.</p>
            </li>
          </ul>
        </div>

        {/* Consejos para usar el comparador */}
        <div class="bg-white rounded-xl p-6 shadow-sm">
          <h3 class="text-xl font-bold mb-4 text-[#2E2E2E]">
            üí° Consejos para encontrar tu raza ideal
          </h3>
          <ul class="space-y-3 text-sm">
            <li class="flex items-start">
              <div class="flex-shrink-0 w-6 h-6 rounded-full bg-[#F6B89E] flex items-center justify-center text-white mr-3 mt-0.5">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
              </div>
              <p><strong>Haz el cuestionario primero:</strong> Para an√°lisis personalizado, completa "Tu Raza Ideal".</p>
            </li>
            <li class="flex items-start">
              <div class="flex-shrink-0 w-6 h-6 rounded-full bg-[#F6B89E] flex items-center justify-center text-white mr-3 mt-0.5">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
              </div>
              <p><strong>Usa m√∫ltiples filtros:</strong> Combina tipo, tama√±o, energ√≠a y compatibilidad familiar.</p>
            </li>
            <li class="flex items-start">
              <div class="flex-shrink-0 w-6 h-6 rounded-full bg-[#F6B89E] flex items-center justify-center text-white mr-3 mt-0.5">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
              </div>
              <p><strong>Compara diferentes tipos:</strong> Mezcla perros grandes y peque√±os para ver diferencias.</p>
            </li>
            <li class="flex items-start">
              <div class="flex-shrink-0 w-6 h-6 rounded-full bg-[#F6B89E] flex items-center justify-center text-white mr-3 mt-0.5">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
              </div>
              <p><strong>Lee el an√°lisis detallado:</strong> Presta atenci√≥n a "aspectos positivos" y "consideraciones".</p>
            </li>
          </ul>
        </div>
      </div>
    </Container>
  </section>

  {/* Navegaci√≥n r√°pida por tipo */}
  <section class="py-8 bg-white border-t border-gray-200">
    <Container>
      <div class="text-center mb-6">
        <h3 class="text-lg font-bold text-[#2E2E2E] mb-2">Exploraci√≥n r√°pida</h3>
        <p class="text-gray-600">Acceso directo a tipos espec√≠ficos</p>
      </div>
      
      <div class="flex flex-wrap justify-center gap-4">
        <Button 
          href="#comparador" 
          variant="primary" 
          size="md" 
          class="bg-[#AFC2D5] text-white hover:bg-[#9DB3C6]"
          data-filter="dog"
        >
          üêï Solo Perros ({stats.dogs})
        </Button>
        <Button 
          href="#comparador" 
          variant="primary" 
          size="md" 
          class="bg-[#AFC2D5] text-white hover:bg-[#9DB3C6]"
          data-filter="cat"
        >
          üê± Solo Gatos ({stats.cats})
        </Button>
        <Button 
          href="#comparador" 
          variant="outline" 
          size="md" 
          class="border-[#AFC2D5] text-[#AFC2D5] hover:bg-[#AFC2D5] hover:text-white"
          data-filter="hypoallergenic"
        >
          ‚ú® Hipoalerg√©nicas ({stats.hypoallergenic})
        </Button>
        <Button 
          href="#comparador" 
          variant="outline" 
          size="md" 
          class="border-[#AFC2D5] text-[#AFC2D5] hover:bg-[#AFC2D5] hover:text-white"
          data-filter="apartment"
        >
          üè† Ideales para apartamento
        </Button>
      </div>
    </Container>
  </section>

  {/* CTA Final */}
  <section class="py-16 bg-gradient-to-r from-[#AFC2D5] to-[#9DB3C6]">
    <Container>
      <div class="text-center text-white max-w-3xl mx-auto">
        <h2 class="text-2xl font-bold mb-4">¬øNecesitas ayuda personalizada?</h2>
        <p class="text-lg mb-8 opacity-90">
          Nuestro sistema de recomendaciones personalizadas te ayuda a encontrar 
          la mascota perfecta seg√∫n tu estilo de vida espec√≠fico.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <Button 
            href="/tu-raza-ideal" 
            variant="secondary" 
            size="lg" 
            class="bg-white text-[#225382] hover:bg-gray-300"
          >
            üéØ Hacer test personalizado
          </Button>
          <Button 
            href="#comparador"
            variant="outline" 
            size="lg" 
            class="border-white text-white hover:bg-white hover:bg-opacity-20"
          >
            üîç Volver al comparador
          </Button>
        </div>
      </div>
    </Container>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Scroll suave para enlaces internos - SIMPLE
      const anchorLinks = document.querySelectorAll('a[href^="#"]') as NodeListOf<HTMLAnchorElement>;
      anchorLinks.forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const targetId = this.getAttribute('href');
          if (targetId) {
            const target = document.querySelector(targetId);
            if (target) {
              target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          }
        });
      });
    });
  </script>

  <style>
    /* Estilos espec√≠ficos para la integraci√≥n */
    .breeds-comparison-wrapper {
      min-height: 600px;
      border-radius: 1rem;
      overflow: hidden;
    }

    /* Scroll suave mejorado */
    html {
      scroll-behavior: smooth;
    }

    /* Animaciones para botones de filtro r√°pido */
    [data-filter] {
      transition: all 0.3s ease;
    }

    [data-filter]:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(175, 194, 213, 0.3);
    }

    /* Mejoras responsive */
    @media (max-width: 768px) {
      .breeds-comparison-wrapper {
        margin: 0 -1rem;
        border-radius: 0;
      }
    }

    /* Loading states */
    .breeds-comparison-wrapper .animate-spin {
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  </style>
</BaseLayout>