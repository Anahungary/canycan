---
// src/pages/razas/[slug].astro - SOLO CMS, todas las razas migradas
import BreedLayout from '../../layouts/BreedLayout.astro';
import { getCollection } from 'astro:content';

export const prerender = true;

export async function getStaticPaths() {
  // ðŸŽ¯ SOLO CMS - todas las razas estÃ¡n en /content/razas/
  const razas = await getCollection('razas');
  
  console.log(`âœ… CMS: ${razas.length} razas encontradas y migradas`);
  
  return razas.map((raza) => ({
    params: { slug: raza.slug },
    props: { raza }
  }));
}

const { raza } = Astro.props;

if (!raza) {
  return Astro.redirect('/404');
}

// Renderizar el contenido markdown del CMS
const { Content } = await raza.render();

console.log(`ðŸŽ¯ Renderizando raza: ${raza.data.name} desde CMS`);
---

<BreedLayout breed={raza.data}>
  <!-- Contenido directo del CMS markdown -->
  <Content />
</BreedLayout>